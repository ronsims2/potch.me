<article>
    <h1><s>Click and Drag</s> Press and Hold</h1>

    <p>I really loved <a href="https://www.xkcd.com/1110/">today's xkcd, "Click and Drag"</a>,
    but couldn't bring myself to spend that much time on my tiny trackpad,
    well, clicking and dragging. Never one to succomb to the challenge to
    allow myself future laziness, I wrote the following code to let me move
    around the incredible illustrated world with my keyboard. Faking mouse
    events FTW!</p>

    <p>Just copy and paste the code into your browser's JavaScript console to
    play!</p>

    <pre><code>
// get the map element
var el = $('.map')[0];

// amount in pixels we want to move each keypress/hold
var move = 200;

function fakeMouseEvent(type, x, y) {
    var evt = document.createEvent("MouseEvents");
    evt.initMouseEvent(type, true, true, window,
                       0, 0, 0, x, y, false, false, false, false, 0, null);
    el.dispatchEvent(evt);
}

$(window).keydown(function(e) {
    var key = e.which;
    if (key >= 37 && key &lt;= 40) {
        e.preventDefault();
        var left=0, top=0;
        if (key == 37) { left += move; }
        if (key == 38) { top += move; }
        if (key == 39) { left -= move; }
        if (key == 40) { top -= move; }
        fakeMouseEvent('mousedown', 0, 0);
        setTimeout(function() {
            fakeMouseEvent('mousemove', left, top);
            setTimeout(function() {
                fakeMouseEvent('mouseup', left, top);
            }, 0);
        }, 0);
    }
});
    </code></pre>

    <p class="meta">
    posted <span class="posted">2012-09-19</span>
    </p>

</article>
